<div class="manage-support-search">
    <div class="manage-search-bar">
        <form class="manage-bar-container" id="form-searchDashboard">
            <input type="text" id="searchDashboard" placeholder="Search Anime/Film" value="<%= search ?? ""%>"/>
        </form>

    </div>
</div>

<script>
    function searching() {
        console.log("searching");
        const searchbar = document.getElementById('searchDashboard');
        const urlParams = new URLSearchParams(window.location.search);
        urlParams.has('q') ? urlParams.set('q', searchbar.value) : urlParams.append('q', searchbar.value);
        let match2 = searchbar.value.match(/\s*/)

        if (searchbar.value) {
            window.history.replaceState(null, null, "/dashboard?"+urlParams.toString().replaceAll("+", "%20"));
        } else {
            window.history.replaceState(null, null, "/dashboard");
        }
        window.location.reload();
    }
    document.getElementById("form-searchDashboard").addEventListener('submit', function (event) {
        event.preventDefault();
        searching()


    });
</script>

<style>


    #searchDashboard::placeholder, #searchDashboard {
        color: #5f5f5f !important;
    }

    .manage-support-search {
        flex-direction: column;
        width: 100%;
    }

    .navbar-item a {
        z-index: 99;
    }

    #searchResultsManage a {
        color: #C8472C !important;
    }

    #searchResultsManage a:last-child {
        border-bottom-right-radius: 5px !important;
        border-bottom-left-radius: 5px !important;
    }

    #searchResultsManage a:hover {
        background-color: #d05c46 !important;
        color: #fff !important;
    }

    .manage-bar-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .manage-search-bar{
        height: 50px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    #searchDashboard {
        height: 35px;
        width: 250px;
        display: block;
        background-color: transparent;
        border: 1px solid #bababa;
        border-radius: 10px;
        padding: 0 10px 0 54px;
        background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg width='18' height='18' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E%3Cdefs%3E%3Cpath d='M18.5 17h-.79l-.28-.27a6.5 6.5 0 10-.7.7l.27.28v.79l5 4.99L23.49 22l-4.99-5zm-6 0a4.5 4.5 0 11-.01-8.99A4.5 4.5 0 0112.5 17z' id='a'/%3E%3C/defs%3E%3Cg transform='translate(-6 -6)' fill='none' fill-rule='evenodd'%3E%3Cmask id='b' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3C/mask%3E%3Cg mask='url(%23b)' fill='%23D8D8D8'%3E%3Cpath d='M3 3h24v24H3z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-size: 16px;
        background-position: 25px 50%;
        color: #7c7c7c;
        font-size: 16px;
    }

    #searchDashboard:focus {
        outline: none;
    }

    #searchDashboard:focus + #searchResultsManage {
        visibility: visible;
    }

    @media screen and (max-width: 1024px) {
        .manage-navbar-item {
            color: #C8472C !important;
        }
        #searchResultsManage {
            z-index: 99;
        }
        #searchDashboard::placeholder, #searchDashboard {
            color: #C8472C !important;
        }
    }
</style>